# ファイルシステムについて

通常のC/C++アプリケーションは、`libc` や `libcxx` 系のライブラリを利用して、同期的なファイルアクセスを行うことができます。一方、JavaScript コード上では、非同期的なファイルアクセスしかできません。加えて、JavaScript では、PC上のローカルファイルに直接アクセスすることができません。

このため、Emscripten では、仮想的なファイルシステムを提供し、ローカルのファイルシステムへのアクセスをエミュレートしています。これにより、ファイルアクセスするようなC/C++アプリケーションをほとんど変更することなく実行することが可能になっています。

## ファイルをパッケージングする
emcc を通して、仮想ファイルシステムに組み込むファイルを指定することができます。これをパッケージングと呼びます。

## MEMFS
Emscripten のデフォルトの仮想ファイルシステムは MEMFS です。これは仮想ファイルシステムをメモリ上に展開します。メモリ上に展開するため、ファイルに書き込んだデータはページをリロードすると失われます。
MEMFS は実行時に、`/` にマウントされます。パッケージしたファイルは、ページへの初回アクセス時に XHR で読み込みされます。
JavaScript に変換されたコードからは、この読み込んだファイルデータに同期／非同期でアクセスすることになります。

# IDBFS
MEMFS は、メモリ上に仮想ファイルシステムを展開するため、ページをリロードすると、ファイルに書き込みしたデータは失われます。
書き込んだデータを永続的に保持したい場合、Web ブラウザ上のページであれば、IDBFS ファイルシステムを利用します。

# NODEFS
NODEFS は、IDBFS と同様にファイルシステムに書き込んだデータを永続的に利用したい場合に使用します。こちらは node.js のためのものです。
NODEFS は、ローカルへのファイルアクセスに直接します。

# ネットワーク上のデータの取得
ネットワーク上からデータを取得する場合、`emscripten_wget()` を利用します。
